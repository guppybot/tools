def run():
    return []

def task(
        name=None,
        toolchain=None,
        require_docker=True,
        require_nvidia_docker=True,
        require_distro=None,
        require_cuda=None,
        require_gpu_arch="*",
        allow_errors=False,
        sh=[]):
    assert name is not None
    assert require_distro is not None
    assert require_cuda is not None
    return {
        "name": name,
        "toolchain": toolchain,
        "require_docker": require_docker,
        "require_nvidia_docker": require_nvidia_docker,
        "require_distro": require_distro,
        "require_cuda": require_cuda,
        "require_gpu_arch": require_gpu_arch,
        "allow_errors": allow_errors,
        "sh": sh,
    }

def out(run):
    for task in run:
        print("#-guppy:v0.task:begin")
        print("#-guppy:v0.task:name {}".format(task["name"]))
        if task["toolchain"] is not None:
            print("#-guppy:v0.task:toolchain {}".format(task["toolchain"]))
        print("#-guppy:v0.task:require_docker {}".format("true" if task["require_docker"] else "false"))
        print("#-guppy:v0.task:require_nvidia_docker {}".format("true" if task["require_nvidia_docker"] else "false"))
        print("#-guppy:v0.task:require_distro {}".format(task["require_distro"]))
        print("#-guppy:v0.task:require_cuda {}".format(task["require_cuda"]))
        print("#-guppy:v0.task:require_gpu_arch {}".format(task["require_gpu_arch"]))
        print("#-guppy:v0.task:allow_errors {}".format("true" if task["allow_errors"] else "false"))
        for sh in task["sh"]:
            print("{}".format(sh))
        print("#-guppy:v0.task:end")
